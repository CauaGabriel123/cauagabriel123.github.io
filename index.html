<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"/>
  <title>LS Store — Moda Feminina</title>

  <!-- Ícones -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64'><rect rx='12' width='64' height='64' fill='%23f6e9ff'/><text x='16' y='40' font-size='26' font-family='Arial' fill='%237a3bfd'>LS</text></svg>">
  <link rel="apple-touch-icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAABo7GoNAAA...">
  <link rel="apple-touch-icon" sizes="180x180" href="assets/icone-ios.png">

    <!-- Modo aplicativo no iPhone -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="LS Store">

  <!-- Fonts + CSS + jsPDF -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script defer src="script.js"></script>
</head>
<body>

<!-- Splash -->
<div id="splash">
  <div class="splash-card">
    <img src="assets/logo-ls-store.png" alt="LS Store" class="splash-logo-img">
    <p>Bem-vindo(a) à LS Store!</p>
  </div>
</div>

<header class="topbar">
  <button class="icon-btn" id="menu-btn">☰</button>
  <div class="brand">
    <img src="assets/logo-ls-storee.png" alt="LS Store" class="logo-header">
  </div>
  <div style="display:flex;align-items:center;gap:6px;">
    <button class="icon-btn" id="user-btn" title="Minha Conta">👤</button>
    <button class="icon-btn" id="cart-btn">🛒<span id="cart-count" class="cart-count">0</span></button>
  </div>
</header>

<!-- Busca -->
<div class="search-wrap">
  <input id="search-input" type="search" placeholder="Buscar por nome, cor ou categoria…" autocomplete="off">
  <button id="search-clear" aria-label="Limpar">✕</button>
  <div id="search-results" class="search-results" hidden></div>
</div>

<!-- Drawer -->
<aside id="drawer" class="drawer" aria-hidden="true">
  <div class="drawer-backdrop"></div>
  <div class="drawer-inner">
    <div class="drawer-header">
      <h3>Menu</h3>
      <button id="close-drawer" class="icon-btn">✕</button>
    </div>

    <ul class="drawer-links">
      <li><a href="#" data-section="inicio" class="active">Início</a></li>

      <li class="has-sub">
        <button class="drawer-accordion" aria-expanded="false" aria-controls="sub-produtos">Produtos ▾</button>
        <ul id="sub-produtos" class="drawer-sublinks" hidden>
          <li><a href="#" data-section="blusas">Blusas</a></li>
          <li><a href="#" data-section="croppeds">Croppeds</a></li>
          <li><a href="#" data-section="leggings">Leggings</a></li>
          <li><a href="#" data-section="shorts">Shorts</a></li>
          <li><a href="#" data-section="vestidos">Vestidos</a></li>
          <li><a href="#" data-section="intimos">Íntimos</a></li>
          <li><a href="#" data-section="biquinis">Biquínis</a></li>
          <li><a href="#" data-section="pijamas">Pijamas</a></li>
          <li><a href="#" data-section="oculos">Óculos</a></li>
          <li><a href="#" data-section="belezas">Belezas</a></li>
          <li><a href="#" data-section="meias">Meias</a></li>
          <li><a href="#" data-section="cuecas">Cuecas</a></li>
        </ul>
      </li>

      <li><a href="#" data-section="contato">Contato</a></li>
      <li><a href="#" data-section="minha-conta">Minha conta</a></li>
      <li><a href="#" id="sobre-nos-link">Sobre Nós</a></li>
    </ul>
  </div>
</aside>


<main class="container">
  <section id="inicio" class="section visible">
    <div class="carousel large" id="carousel">
      <div class="slides" id="carousel-slides"></div>
      <div class="dots" id="carousel-dots"></div>
    </div>

    <h2 class="section-title">Destaques da Semana</h2>
    <div id="featured" class="grid"></div>
  </section>

  <!-- Categorias -->
  <section id="blusas" class="section"><h2 class="section-title">Blusas</h2><div class="grid" data-cat="blusas"></div></section>
  <section id="croppeds" class="section"><h2 class="section-title">Croppeds</h2><div class="grid" data-cat="croppeds"></div></section>
  <section id="leggings" class="section"><h2 class="section-title">Leggings</h2><div class="grid" data-cat="leggings"></div></section>
  <section id="shorts" class="section"><h2 class="section-title">Shorts</h2><div class="grid" data-cat="shorts"></div></section>
  <section id="vestidos" class="section"><h2 class="section-title">Vestidos</h2><div class="grid" data-cat="vestidos"></div></section>
  <section id="intimos" class="section"><h2 class="section-title">Íntimos</h2><div class="grid" data-cat="intimos"></div></section>
  <section id="biquinis" class="section"><h2 class="section-title">Biquínis</h2><div class="grid" data-cat="biquinis"></div></section>
  <section id="pijamas" class="section"><h2 class="section-title">Pijamas</h2><div class="grid" data-cat="pijamas"></div></section>
  <section id="oculos" class="section"><h2 class="section-title">Óculos</h2><div class="grid" data-cat="oculos"></div></section>
  <section id="belezas" class="section"><h2 class="section-title">Belezas</h2><div class="grid" data-cat="belezas"></div></section>
  <section id="meias" class="section"><h2 class="section-title">Meias</h2><div class="grid" data-cat="meias"></div></section>
  <section id="cuecas" class="section"><h2 class="section-title">Cuecas</h2><div class="grid" data-cat="cuecas"></div></section>

  <!-- Contato -->
  <section id="contato" class="section contato-modern">
    <h2 class="section-title">Contato</h2>
    <div class="contato-card">
      <div class="contato-info">
        <p>💌 Instagram: <a id="insta-link" href="#" target="_blank" rel="noopener">@ls_store.fc</a></p>
        <p>💬 WhatsApp: <a href="https://wa.me/5551989235482" target="_blank" rel="noopener">+55 51 98923-5482</a></p>
      </div>
    </div>
  </section>

  <!-- Minha conta -->
  <section id="minha-conta" class="section">
    <h2 class="section-title">Minha conta</h2>
    <div id="account-area" class="account-area"></div>
  </section>

  <!-- Sobre Nós -->
  <section id="sobre-nos" class="section sobre-nos-modern">
    <h2 class="section-title">Sobre Nós</h2>
    <div class="sobre-nos-box">
      <div class="sobre-nos-icon">💖</div>
      <p>💕 A LS STORE é uma loja feita com amor pra quem ama moda feminina! Aqui você encontra peças modernas, estilosas e com aquele toque único que só a LS tem. 🚚 Entregamos rapidinho em <strong>toda Canoas!</strong></p>
    </div>
  </section>
</main>

<footer class="footer">
  <div class="footer-vitrine">
  <h3 class="footer-title">Veja também</h3>
  <div id="footer-products" class="h-scroller" aria-label="Produtos no rodapé"></div>
</div>
  <nav class="social">
    <a id="footer-insta" href="#" aria-label="Instagram">@ls_store.fc</a>
    <a href="https://wa.me/5551989235482" aria-label="WhatsApp">WhatsApp</a>
    <a href="#contato" aria-label="Fale conosco">Fale conosco</a>
  </nav>
  <p>© 2025 LS Store — Moda & Acessórios Femininos 💖</p>
</footer>

<!-- Carrinho -->
<aside id="cart" class="cart" aria-hidden="true">
  <div class="cart-header"><h3>Seu Carrinho</h3><button id="close-cart" class="icon-btn">✕</button></div>
  <div id="cart-items" class="cart-items"></div>

  <div class="client-info">
    <h4>Finalizar Pedido</h4>
    <small class="hint">Preencha seus dados para entrega ou retirada.</small>

    <label>Nome completo*<input id="client-name" type="text" required></label>
    <label>Forma de pagamento*<select id="payment"><option>Pix</option><option>Cartão de crédito</option><option>Cartão de débito</option><option>Dinheiro</option></select></label>

    <div id="cash-section" class="cash" style="display:none;">
      <p><strong>Precisa de troco?*</strong></p>
      <label class="inline"><input type="radio" name="cash-change" value="nao"> Não</label>
      <label class="inline"><input type="radio" name="cash-change" value="sim"> Sim, para R$</label>
      <input id="cash-amount" inputmode="decimal" type="number" min="0" step="0.01" placeholder="Ex: 100,00" style="display:none;">
    </div>

    <label>Entrega*<select id="delivery-type"><option value="retirada">Retirada</option><option value="entrega">Entrega</option></select></label>

    <div id="address-fields" class="address" style="display:none;">
      <label>Rua*<input id="street" type="text"></label>
      <label>Número*<input id="number" type="text" inputmode="numeric" pattern="[0-9]*"></label>
      <label>Bairro*<select id="neighborhood">
        <option value="">Selecione...</option>
        <option value="Mathias Velho">Mathias Velho</option>
        <option value="Harmonia">Harmonia</option>
        <option value="Mato Grande">Mato Grande</option>
        <option value="São Luís">São Luís</option>
        <option value="Centro">Centro</option>
        <option value="Fátima">Fátima</option>
        <option value="Igara">Igara</option>
        <option value="Rio Branco">Rio Branco</option>
        <option value="Industrial">Industrial</option>
        <option value="Marechal Rondon">Marechal Rondon</option>
        <option value="Estância Velha">Estância Velha</option>
        <option value="Guajuviras">Guajuviras</option>
        <option value="Olaria">Olaria</option>
        <option value="Outra Cidade">Outra Cidade</option>
      </select></label>
    </div>

    <label>Observações (opcional)<textarea id="order-notes" rows="2" placeholder="Ex: entregar no portão lateral"></textarea></label>
  </div>

  <div class="cart-footer">
    <p>Total produtos: R$ <span id="cart-total">0,00</span></p>
    <p id="delivery-fee" style="display:none;">Taxa entrega: R$ <span id="fee-value">0,00</span></p>
    <h3>Total final: R$ <span id="final-total">0,00</span></h3>
    <button id="checkout" class="checkout">Finalizar Compra (WhatsApp)</button>
  </div>
</aside>

<!-- Popup -->
<div id="popup-overlay" class="popup-overlay" hidden>
  <div class="popup">
    <h3>✅ Pedido enviado com sucesso!</h3>
    <p>O WhatsApp será aberto em instantes.<br><strong>Toque em ENVIAR no WhatsApp 💬</strong></p>
  </div>
</div>
<script>
window.addEventListener('DOMContentLoaded', () => {
  setTimeout(() => {
    const box = document.getElementById('footer-products');
    if (box && !box.innerHTML.trim() && typeof renderFooterProducts === 'function') {
      console.warn('⚠️ Rodapé vazio — renderizando manualmente com fallback');
      renderFooterProducts(FALLBACK_PRODUCTS);
    }
  }, 1500);
});
</script>

<button id="backToTop" class="back-to-top" aria-label="Voltar ao topo">↑</button>
<!-- ===== LS STORE • Product Modal (Isolado) ===== -->
<div class="lsx-modal" id="lsxModal" aria-hidden="true">
  <div class="lsx-modal__backdrop" data-close="true"></div>

  <div class="lsx-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="lsxModalTitle">
    <button class="lsx-modal__close" type="button" aria-label="Fechar" data-close="true">×</button>

    <header class="lsx-modal__header">
      <nav class="lsx-breadcrumb" id="lsxBreadcrumb"></nav>
      <h2 class="lsx-modal__title" id="lsxModalTitle"></h2>
    </header>

    <section class="lsx-modal__content">
      <div class="lsx-gallery">
        <div class="lsx-gallery__stage">
          <img id="lsxImageMain" alt="" />
          <button class="lsx-gallery__zoom" type="button" id="lsxZoomBtn">⤢</button>
        </div>
        <div class="lsx-gallery__thumbs" id="lsxThumbs"></div>
      </div>

      <div class="lsx-info">
        <div class="lsx-price">
          <div class="lsx-price__value" id="lsxPrice"></div>
          <a class="lsx-price__installments" id="lsxInstallments" href="#payments">12x sem juros*</a>
        </div>

        <div class="lsx-sizes" id="lsxSizes"></div>
        <div class="lsx-colors" id="lsxColors"></div>
        <div class="lsx-stock" id="lsxStock"></div>

        <div class="lsx-cta">
  <button class="lsx-btn lsx-btn--primary" id="lsxBuyBtn">COMPRAR</button>
  <button class="lsx-btn lsx-btn--ghost" id="lsxAddBtn" type="button">Adicionar ao carrinho</button>
</div>

        <details class="lsx-details">
          <summary>Entrega & retirada</summary>
          <div class="lsx-details__body">
            <ul>
  <li>Motoboy (mesmo dia em área atendida)</li>
  <li>Retirada na loja / ponto combinado</li>
</ul>
          </div>
        </details>

        <details class="lsx-details" id="lsxDescriptionBox">
          <summary>Descrição</summary>
          <div class="lsx-details__body" id="lsxDescription"></div>
        </details>
      </div>
    </section>
  </div>
</div>
<!-- ===== /LS STORE • Product Modal ===== -->
<!-- ===== LS STORE • Firebase Login / Cadastro ===== -->
<div id="auth-modal" class="modal" aria-hidden="true">
  <div class="modal-card auth-card">
    <button id="close-auth" class="modal-close">✕</button>
    
    <!-- Login -->
    <div id="login-area" class="auth-content">
      <h3>Entrar na conta</h3>
      <form id="login-form">
  <input type="email" id="login-email" placeholder="E-mail" required>

  <!-- senha com toggle -->
  <div class="password-field">
    <input type="password" id="login-password" placeholder="Senha" required>
    <button type="button" class="toggle-pass" data-target="login-password" aria-label="Mostrar/ocultar senha">👁</button>
  </div>

  <button type="submit" class="enter-btn">Entrar</button>
</form>
      <p><button id="forgot-pass" class="text-btn">Esqueci minha senha</button></p>
      <p>Não tem conta? <button id="switch-to-signup" class="text-btn">Cadastre-se</button></p>
    </div>

    <!-- Cadastro -->
    <div id="signup-area" class="auth-content" hidden>
      <h3>Criar conta</h3>
      <form id="signup-form">
  <input type="text" id="signup-name" placeholder="Nome completo" required>
  <input type="email" id="signup-email" placeholder="E-mail" required>
  <input type="tel" id="signup-phone" placeholder="Telefone" required>

  <!-- senha com toggle -->
  <div class="password-field">
    <input type="password" id="signup-password" placeholder="Senha" required>
    <button type="button" class="toggle-pass" data-target="signup-password" aria-label="Mostrar/ocultar senha">👁</button>
  </div>

  <button type="submit" class="enter-btn">Cadastrar</button>
</form>
      <p>Já tem conta? <button id="switch-to-login" class="text-btn">Entrar</button></p>
    </div>
  </div>
</div>

<!-- Firebase Auth -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";
  import { getFirestore, setDoc, doc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAcBWElBXwkN5ynO9JJwelb34ds1GkCEkE",
    authDomain: "ls-store-8d77b.firebaseapp.com",
    projectId: "ls-store-8d77b",
    storageBucket: "ls-store-8d77b.firebasestorage.app",
    messagingSenderId: "267417239385",
    appId: "1:267417239385:web:ce97e459ce7c17584e1648",
    measurementId: "G-VSKFJFGY75"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // ==== LOGIN, CADASTRO E TROCA DE TELA ====
  const userBtn = document.getElementById('user-btn') || document.getElementById('login-btn');
  const authModal = document.getElementById('auth-modal');
  const closeAuth = document.getElementById('close-auth');
  const loginArea = document.getElementById('login-area');
  const signupArea = document.getElementById('signup-area');

  userBtn.onclick = () => { authModal.setAttribute('aria-hidden', 'false'); };
  closeAuth.onclick = () => { authModal.setAttribute('aria-hidden', 'true'); };

  document.getElementById('switch-to-signup').onclick = () => {
    loginArea.hidden = true; signupArea.hidden = false;
  };
  document.getElementById('switch-to-login').onclick = () => {
    loginArea.hidden = false; signupArea.hidden = true;
  };

  // ==== CADASTRO ====
  document.getElementById('signup-form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const name = signupName.value;
    const email = signupEmail.value;
    const phone = signupPhone.value;
    const password = signupPassword.value;
    try {
      const cred = await createUserWithEmailAndPassword(auth, email, password);
      await setDoc(doc(db, "users", cred.user.uid), { name, email, phone });
      alert("Conta criada com sucesso! Faça login agora.");
      loginArea.hidden = false; signupArea.hidden = true;
    } catch(err){
  let msg = "Ocorreu um erro.";
  if(err.code === "auth/invalid-email") msg = "E-mail inválido.";
  else if(err.code === "auth/user-not-found" || err.code === "auth/wrong-password") msg = "E-mail ou senha incorretos.";
  else if(err.code === "auth/email-already-in-use") msg = "Este e-mail já está cadastrado.";
  alert(msg);
}
  });

  // ==== LOGIN ====
  document.getElementById('login-form').addEventListener('submit', async (e)=>{
    e.preventDefault();
    try {
      await signInWithEmailAndPassword(auth, loginEmail.value, loginPassword.value);
      authModal.setAttribute('aria-hidden','true');
      alert("Login efetuado com sucesso!");
    } catch(err){
  let msg = "Ocorreu um erro.";
  if(err.code === "auth/invalid-email") msg = "E-mail inválido.";
  else if(err.code === "auth/user-not-found" || err.code === "auth/wrong-password") msg = "E-mail ou senha incorretos.";
  else if(err.code === "auth/email-already-in-use") msg = "Este e-mail já está cadastrado.";
  alert(msg);
}
  });

  // ==== RECUPERAR SENHA ====
  document.getElementById('forgot-pass').onclick = async ()=>{
    const email = prompt("Digite seu e-mail para redefinir a senha:");
    if(email) await sendPasswordResetEmail(auth, email);
    alert("Se o e-mail estiver cadastrado, um link foi enviado!");
  };

  // ==== MONITORAR USUÁRIO LOGADO ====
  onAuthStateChanged(auth, (user)=>{
    const acc = document.getElementById('account-area');
    if(user){
      acc.innerHTML = `<div class='auth-card'><h3>Bem-vindo, ${user.email}</h3><button class='enter-btn' id='logout-btn'>Sair</button></div>`;
      document.getElementById('logout-btn').onclick = ()=> signOut(auth);
    } else {
      acc.innerHTML = `<div class='auth-card'><p>Você não está logado.</p></div>`;
    }
  });
    // ==== MOSTRAR / OCULTAR SENHA ====
  document.querySelectorAll('.toggle-pass').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const targetId = btn.getAttribute('data-target');
      const input = document.getElementById(targetId);
      if(input){
        const isPass = input.type === 'password';
        input.type = isPass ? 'text' : 'password';
        btn.textContent = isPass ? '🙈' : '👁';
      }
    });
  });
</script>
<!-- ===== /LS STORE • Firebase Login / Cadastro ===== -->
</body>
</html>
